# Render Deployment Guide

## Prerequisites

1. **Render Account**: Sign up at [render.com](https://render.com)
2. **GitHub Repository**: Your code should be in a GitHub repository
3. **Python API**: If you have a Python API, deploy it first and update the `PYTHON_API_URL` in `render.yaml`

## Deployment Steps

### 1. Connect Repository
- Go to your Render dashboard
- Click "New +" â†’ "Blueprint"
- Connect your GitHub repository
- Select the repository containing this Laravel app

### 2. Configure Environment Variables
The following environment variables will be automatically configured through `render.yaml`:
- `APP_ENV=production`
- `APP_DEBUG=false`
- `APP_URL` (auto-generated from service)
- `APP_KEY` (auto-generated)
- Database connection variables (auto-configured)

### 3. Update Python API URL
Before deploying, update the `PYTHON_API_URL` in `render.yaml`:
```yaml
- key: PYTHON_API_URL
  value: "https://your-actual-python-api.onrender.com"
```

### 4. Deploy
- Render will automatically detect the `render.yaml` file
- It will create:
  - A MySQL database (`kmg-mysql-db`)
  - A web service (`kmg-laravel-web`)
  - A worker service (`kmg-laravel-queue`)

### 5. Post-Deployment
- Database migrations will run automatically
- The app will be available at your Render URL
- Queue workers will start processing jobs

## Services Created

1. **Database**: `kmg-mysql-db`
   - MySQL database for the application
   - Free tier

2. **Web Service**: `kmg-laravel-web`
   - Main Laravel application
   - Runs on port 10000
   - Free tier

3. **Worker Service**: `kmg-laravel-queue`
   - Processes background jobs
   - Uses database queue driver
   - Free tier

## Troubleshooting

### Build Failures
- Check the build logs in Render dashboard
- Ensure all dependencies are in `composer.json` and `package.json`
- Verify Docker build works locally

### Runtime Errors
- Check application logs in Render dashboard
- Verify environment variables are set correctly
- Check database connection

### Performance Issues
- Consider upgrading to paid plans for better performance
- Monitor resource usage in Render dashboard

## Local Development vs Production

### Environment Variables
- Local: Uses `.env` file
- Production: Uses Render environment variables

### Database
- Local: Local MySQL/SQLite
- Production: Render MySQL database

### Queue Processing
- Local: `php artisan queue:work`
- Production: Dedicated worker service

## Security Notes

1. **APP_KEY**: Automatically generated by Render
2. **Database Credentials**: Automatically managed by Render
3. **HTTPS**: Automatically provided by Render
4. **Environment Variables**: Securely stored in Render

## Monitoring

- **Logs**: Available in Render dashboard
- **Metrics**: CPU, memory, and request metrics
- **Alerts**: Configure in Render dashboard

## Scaling

- **Web Service**: Can be scaled horizontally
- **Worker Service**: Can be scaled based on queue load
- **Database**: Consider upgrading plan for more connections

## Cost Optimization

- **Free Tier Limits**: 
  - Services sleep after 15 minutes of inactivity
  - 750 hours per month
  - Limited CPU and memory

- **Paid Plans**: 
  - No sleeping
  - Better performance
  - More resources
